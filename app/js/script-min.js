"use strict";var form=document.querySelector(".js-form"),input=document.querySelector(".js-input"),marks=[{img:"img/google.png",name:"google",text:"LOrem ipsum",url:"https://www.google.com"},{img:"img/gidonline.png",name:"gidoonline",text:"LOrem ipsum",url:"http://gidonline.in/"},{img:"img/habr.png",name:"habr",text:"LOrem ipsum",url:"https://habr.com/"}];marks=localStorage.getItem("items")?JSON.parse(localStorage.getItem("items")):marks,localStorage.setItem("items",JSON.stringify(marks));var data=JSON.parse(localStorage.getItem("items")),container=document.querySelector(".bookmark-container"),source=document.querySelector("#container").innerHTML.trim(),template=Handlebars.compile(source),markup=template({data:data});container.insertAdjacentHTML("beforeend",markup);var getValue=function(e,t){e.preventDefault();var r=input.value;input.value="";var a=checkUrl(r);0!==r.length&&(a?alert("ERROR!!!We have such an url"):t(r))};function checkUrl(t){return marks.find(function(e){return e.url==t})}function makeContent(e){var t={img:"https://picsum.photos/230/120/?random",name:e,text:"Lorem ipsum",url:e};marks.unshift(t),localStorage.setItem("items",JSON.stringify(marks));var r=document.querySelector("#mark-container").innerHTML.trim(),a=Handlebars.compile(r)(t);container.insertAdjacentHTML("afterbegin",a)}function deleteMark(e){if("BUTTON"==e.target.nodeName){var t=e.target.parentNode;e.target.parentNode.classList.add("delete");var r=document.querySelectorAll(".mark-block"),a=Array.from(r).indexOf(t);marks.splice(a,1),localStorage.setItem("items",JSON.stringify(marks))}}form.addEventListener("submit",function(){getValue(event,makeContent)},!1),container.addEventListener("click",deleteMark);